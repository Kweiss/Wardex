{"abi":[{"type":"function","name":"accounts","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"evaluator","type":"address","internalType":"address"},{"name":"frozen","type":"bool","internalType":"bool"},{"name":"initialized","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"checkSpendingLimit","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"token","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"withinLimits","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"freeze","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getEvaluator","inputs":[{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"initialize","inputs":[{"name":"evaluator","type":"address","internalType":"address"},{"name":"ethMaxPerTx","type":"uint256","internalType":"uint256"},{"name":"ethMaxPerDay","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"isFrozen","inputs":[{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isInitialized","inputs":[{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"setEvaluator","inputs":[{"name":"newEvaluator","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setSpendingLimit","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"maxPerTx","type":"uint256","internalType":"uint256"},{"name":"maxPerDay","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"spendingLimits","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"maxPerTx","type":"uint256","internalType":"uint256"},{"name":"maxPerDay","type":"uint256","internalType":"uint256"},{"name":"spentToday","type":"uint256","internalType":"uint256"},{"name":"lastResetDay","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unfreeze","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"validateUserOp","inputs":[{"name":"userOp","type":"tuple","internalType":"struct PackedUserOperation","components":[{"name":"sender","type":"address","internalType":"address"},{"name":"nonce","type":"uint256","internalType":"uint256"},{"name":"initCode","type":"bytes","internalType":"bytes"},{"name":"callData","type":"bytes","internalType":"bytes"},{"name":"accountGasLimits","type":"bytes32","internalType":"bytes32"},{"name":"preVerificationGas","type":"uint256","internalType":"uint256"},{"name":"gasFees","type":"bytes32","internalType":"bytes32"},{"name":"paymasterAndData","type":"bytes","internalType":"bytes"},{"name":"signature","type":"bytes","internalType":"bytes"}]},{"name":"userOpHash","type":"bytes32","internalType":"bytes32"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"validationData","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"event","name":"AccountFrozen","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"AccountUnfrozen","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"EvaluatorUpdated","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"evaluator","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"SpendingLimitSet","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"maxPerTx","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"maxPerDay","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"TransactionApproved","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"userOpHash","type":"bytes32","indexed":true,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"TransactionBlocked","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"userOpHash","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"reason","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"error","name":"AccountIsFrozen","inputs":[]},{"type":"error","name":"InvalidApprovalSignature","inputs":[]},{"type":"error","name":"InvalidEvaluator","inputs":[]},{"type":"error","name":"NotAccountOwner","inputs":[]},{"type":"error","name":"SpendingLimitExceeded","inputs":[{"name":"limitType","type":"string","internalType":"string"}]},{"type":"error","name":"ZeroAddress","inputs":[]}],"bytecode":{"object":"0x608060405234801561000f575f80fd5b50610c188061001d5f395ff3fe608060405234801561000f575f80fd5b50600436106100b1575f3560e01c80636a28f0001161006e5780636a28f000146101dd5780637a1ac61e146101e5578063c51e8e44146101f8578063d60b347f1461020b578063e58398361461023d578063f02926c71461026f575f80fd5b806302dbbbac146100b557806319822f7c146100ca57806340097416146100f057806340cc860b146101135780635e5c06e21461017057806362a5af3b146101d5575b5f80fd5b6100c86100c3366004610a67565b6102b2565b005b6100dd6100d8366004610a80565b610369565b6040519081526020015b60405180910390f35b6101036100fe366004610acf565b61050e565b60405190151581526020016100e7565b610150610121366004610b08565b600160208181525f93845260408085209091529183529120805491810154600282015460039092015490919084565b6040805194855260208501939093529183015260608201526080016100e7565b6101ae61017e366004610a67565b5f602081905290815260409020546001600160a01b0381169060ff600160a01b8204811691600160a81b90041683565b604080516001600160a01b03909416845291151560208401521515908201526060016100e7565b6100c86105b9565b6100c861063a565b6100c86101f3366004610b39565b6106b5565b6100c8610206366004610b39565b61085d565b610103610219366004610a67565b6001600160a01b03165f90815260208190526040902054600160a81b900460ff1690565b61010361024b366004610a67565b6001600160a01b03165f90815260208190526040902054600160a01b900460ff1690565b61029a61027d366004610a67565b6001600160a01b039081165f908152602081905260409020541690565b6040516001600160a01b0390911681526020016100e7565b335f90815260208190526040812054600160a81b900460ff16151590036102ec5760405163fcfdb9b560e01b815260040160405180910390fd5b6001600160a01b0381166103135760405163d92e233d60e01b815260040160405180910390fd5b335f8181526020819052604080822080546001600160a01b0319166001600160a01b03861690811790915590519092917f251ea37dea2bc12d4a4f4db92f8d7ea37e18a2e9bc65531e97a4990a091be41c91a350565b5f80808061037a6020880188610a67565b6001600160a01b0316815260208101919091526040015f208054909150600160a01b900460ff161561042257836103b46020870187610a67565b6001600160a01b03167f1a11608e6fbbeff096947d8279b2af70521647bd84cccbe40c5cae40048a60356040516104109060208082526011908201527020b1b1b7bab73a1034b990333937bd32b760791b604082015260600190565b60405180910390a36001915050610507565b610445610433610100870187610b54565b835487906001600160a01b0316610946565b6104bf57836104576020870187610a67565b6001600160a01b03167f1a11608e6fbbeff096947d8279b2af70521647bd84cccbe40c5cae40048a60356040516104109060208082526017908201527f496e76616c69642057617264657820617070726f76616c000000000000000000604082015260600190565b836104cd6020870187610a67565b6001600160a01b03167f7115b98931e7aca6d0aa11d10fe28877316a661a44c4bfc93c76b19dbbf5b10760405160405180910390a35f9150505b9392505050565b6001600160a01b038084165f9081526001602090815260408083209386168352929052908120805415801561054557506001810154155b15610554576001915050610507565b8054831115610566575f915050610507565b5f6105746201518042610b9e565b600283015460038401549192509082111561058c57505f5b600183015461059b8683610bbd565b11156105ac575f9350505050610507565b5060019695505050505050565b335f90815260208190526040812054600160a81b900460ff16151590036105f35760405163fcfdb9b560e01b815260040160405180910390fd5b335f81815260208190526040808220805460ff60a01b1916600160a01b179055517f4f2a367e694e71282f29ab5eaa04c4c0be45ac5bf2ca74fb67068b98bdc2887d9190a2565b335f90815260208190526040812054600160a81b900460ff16151590036106745760405163fcfdb9b560e01b815260040160405180910390fd5b335f81815260208190526040808220805460ff60a01b19169055517ff915cd9fe234de6e8d3afe7bf2388d35b2b6d48e8c629a24602019bde79c213a9190a2565b6001600160a01b0383166106dc5760405163d92e233d60e01b815260040160405180910390fd5b335f90815260208190526040902054600160a81b900460ff16156107135760405163fcfdb9b560e01b815260040160405180910390fd5b60408051606080820183526001600160a01b0380871683525f6020808501828152600186880190815233845283835287842096518754925191511515600160a81b0260ff60a81b19921515600160a01b026001600160a81b0319909416919096161791909117169290921790935583516080810185528681529081018590529283019190915281016107a86201518042610b9e565b9052335f818152600160208181526040808420848052825280842086518155918601519282019290925584820151600282015560609094015160039094019390935591516001600160a01b038616927f251ea37dea2bc12d4a4f4db92f8d7ea37e18a2e9bc65531e97a4990a091be41c91a360408051838152602081018390525f9133917f33b7e2f21b9f1f683df3ced12dbc0954e9cb76bd5a9950f4bfb040595e7b4b4791015b60405180910390a3505050565b335f90815260208190526040812054600160a81b900460ff16151590036108975760405163fcfdb9b560e01b815260040160405180910390fd5b60405180608001604052808381526020018281526020015f815260200162015180426108c39190610b9e565b9052335f8181526001602081815260408084206001600160a01b038a1680865290835293819020865181558683015193810193909355858101516002840155606090950151600390920191909155835186815290810185905290927f33b7e2f21b9f1f683df3ced12dbc0954e9cb76bd5a9950f4bfb040595e7b4b479101610850565b5f6041841461095657505f610a44565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c82018690528735929088013591908801355f90811a91605c0160408051601f1981840301815282825280516020918201205f80855291840180845281905260ff86169284019290925260608301879052608083018690529092509060019060a0016020604051602081039080840390855afa158015610a07573d5f803e3d5ffd5b505050602060405103519050866001600160a01b0316816001600160a01b0316148015610a3c57506001600160a01b03811615155b955050505050505b949350505050565b80356001600160a01b0381168114610a62575f80fd5b919050565b5f60208284031215610a77575f80fd5b61050782610a4c565b5f805f60608486031215610a92575f80fd5b833567ffffffffffffffff811115610aa8575f80fd5b84016101208187031215610aba575f80fd5b95602085013595506040909401359392505050565b5f805f60608486031215610ae1575f80fd5b610aea84610a4c565b9250610af860208501610a4c565b9150604084013590509250925092565b5f8060408385031215610b19575f80fd5b610b2283610a4c565b9150610b3060208401610a4c565b90509250929050565b5f805f60608486031215610b4b575f80fd5b610aba84610a4c565b5f808335601e19843603018112610b69575f80fd5b83018035915067ffffffffffffffff821115610b83575f80fd5b602001915036819003821315610b97575f80fd5b9250929050565b5f82610bb857634e487b7160e01b5f52601260045260245ffd5b500490565b80820180821115610bdc57634e487b7160e01b5f52601160045260245ffd5b9291505056fea26469706673582212202e9a028063e667d365395a90c2c366a59c49b3f10ac832060c04c8a5f635233c64736f6c63430008180033","sourceMap":"1439:11222:19:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561000f575f80fd5b50600436106100b1575f3560e01c80636a28f0001161006e5780636a28f000146101dd5780637a1ac61e146101e5578063c51e8e44146101f8578063d60b347f1461020b578063e58398361461023d578063f02926c71461026f575f80fd5b806302dbbbac146100b557806319822f7c146100ca57806340097416146100f057806340cc860b146101135780635e5c06e21461017057806362a5af3b146101d5575b5f80fd5b6100c86100c3366004610a67565b6102b2565b005b6100dd6100d8366004610a80565b610369565b6040519081526020015b60405180910390f35b6101036100fe366004610acf565b61050e565b60405190151581526020016100e7565b610150610121366004610b08565b600160208181525f93845260408085209091529183529120805491810154600282015460039092015490919084565b6040805194855260208501939093529183015260608201526080016100e7565b6101ae61017e366004610a67565b5f602081905290815260409020546001600160a01b0381169060ff600160a01b8204811691600160a81b90041683565b604080516001600160a01b03909416845291151560208401521515908201526060016100e7565b6100c86105b9565b6100c861063a565b6100c86101f3366004610b39565b6106b5565b6100c8610206366004610b39565b61085d565b610103610219366004610a67565b6001600160a01b03165f90815260208190526040902054600160a81b900460ff1690565b61010361024b366004610a67565b6001600160a01b03165f90815260208190526040902054600160a01b900460ff1690565b61029a61027d366004610a67565b6001600160a01b039081165f908152602081905260409020541690565b6040516001600160a01b0390911681526020016100e7565b335f90815260208190526040812054600160a81b900460ff16151590036102ec5760405163fcfdb9b560e01b815260040160405180910390fd5b6001600160a01b0381166103135760405163d92e233d60e01b815260040160405180910390fd5b335f8181526020819052604080822080546001600160a01b0319166001600160a01b03861690811790915590519092917f251ea37dea2bc12d4a4f4db92f8d7ea37e18a2e9bc65531e97a4990a091be41c91a350565b5f80808061037a6020880188610a67565b6001600160a01b0316815260208101919091526040015f208054909150600160a01b900460ff161561042257836103b46020870187610a67565b6001600160a01b03167f1a11608e6fbbeff096947d8279b2af70521647bd84cccbe40c5cae40048a60356040516104109060208082526011908201527020b1b1b7bab73a1034b990333937bd32b760791b604082015260600190565b60405180910390a36001915050610507565b610445610433610100870187610b54565b835487906001600160a01b0316610946565b6104bf57836104576020870187610a67565b6001600160a01b03167f1a11608e6fbbeff096947d8279b2af70521647bd84cccbe40c5cae40048a60356040516104109060208082526017908201527f496e76616c69642057617264657820617070726f76616c000000000000000000604082015260600190565b836104cd6020870187610a67565b6001600160a01b03167f7115b98931e7aca6d0aa11d10fe28877316a661a44c4bfc93c76b19dbbf5b10760405160405180910390a35f9150505b9392505050565b6001600160a01b038084165f9081526001602090815260408083209386168352929052908120805415801561054557506001810154155b15610554576001915050610507565b8054831115610566575f915050610507565b5f6105746201518042610b9e565b600283015460038401549192509082111561058c57505f5b600183015461059b8683610bbd565b11156105ac575f9350505050610507565b5060019695505050505050565b335f90815260208190526040812054600160a81b900460ff16151590036105f35760405163fcfdb9b560e01b815260040160405180910390fd5b335f81815260208190526040808220805460ff60a01b1916600160a01b179055517f4f2a367e694e71282f29ab5eaa04c4c0be45ac5bf2ca74fb67068b98bdc2887d9190a2565b335f90815260208190526040812054600160a81b900460ff16151590036106745760405163fcfdb9b560e01b815260040160405180910390fd5b335f81815260208190526040808220805460ff60a01b19169055517ff915cd9fe234de6e8d3afe7bf2388d35b2b6d48e8c629a24602019bde79c213a9190a2565b6001600160a01b0383166106dc5760405163d92e233d60e01b815260040160405180910390fd5b335f90815260208190526040902054600160a81b900460ff16156107135760405163fcfdb9b560e01b815260040160405180910390fd5b60408051606080820183526001600160a01b0380871683525f6020808501828152600186880190815233845283835287842096518754925191511515600160a81b0260ff60a81b19921515600160a01b026001600160a81b0319909416919096161791909117169290921790935583516080810185528681529081018590529283019190915281016107a86201518042610b9e565b9052335f818152600160208181526040808420848052825280842086518155918601519282019290925584820151600282015560609094015160039094019390935591516001600160a01b038616927f251ea37dea2bc12d4a4f4db92f8d7ea37e18a2e9bc65531e97a4990a091be41c91a360408051838152602081018390525f9133917f33b7e2f21b9f1f683df3ced12dbc0954e9cb76bd5a9950f4bfb040595e7b4b4791015b60405180910390a3505050565b335f90815260208190526040812054600160a81b900460ff16151590036108975760405163fcfdb9b560e01b815260040160405180910390fd5b60405180608001604052808381526020018281526020015f815260200162015180426108c39190610b9e565b9052335f8181526001602081815260408084206001600160a01b038a1680865290835293819020865181558683015193810193909355858101516002840155606090950151600390920191909155835186815290810185905290927f33b7e2f21b9f1f683df3ced12dbc0954e9cb76bd5a9950f4bfb040595e7b4b479101610850565b5f6041841461095657505f610a44565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c82018690528735929088013591908801355f90811a91605c0160408051601f1981840301815282825280516020918201205f80855291840180845281905260ff86169284019290925260608301879052608083018690529092509060019060a0016020604051602081039080840390855afa158015610a07573d5f803e3d5ffd5b505050602060405103519050866001600160a01b0316816001600160a01b0316148015610a3c57506001600160a01b03811615155b955050505050505b949350505050565b80356001600160a01b0381168114610a62575f80fd5b919050565b5f60208284031215610a77575f80fd5b61050782610a4c565b5f805f60608486031215610a92575f80fd5b833567ffffffffffffffff811115610aa8575f80fd5b84016101208187031215610aba575f80fd5b95602085013595506040909401359392505050565b5f805f60608486031215610ae1575f80fd5b610aea84610a4c565b9250610af860208501610a4c565b9150604084013590509250925092565b5f8060408385031215610b19575f80fd5b610b2283610a4c565b9150610b3060208401610a4c565b90509250929050565b5f805f60608486031215610b4b575f80fd5b610aba84610a4c565b5f808335601e19843603018112610b69575f80fd5b83018035915067ffffffffffffffff821115610b83575f80fd5b602001915036819003821315610b97575f80fd5b9250929050565b5f82610bb857634e487b7160e01b5f52601260045260245ffd5b500490565b80820180821115610bdc57634e487b7160e01b5f52601160045260245ffd5b9291505056fea26469706673582212202e9a028063e667d365395a90c2c366a59c49b3f10ac832060c04c8a5f635233c64736f6c63430008180033","sourceMap":"1439:11222:19:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;10409:246;;;;;;:::i;:::-;;:::i;:::-;;5913:1158;;;;;;:::i;:::-;;:::i;:::-;;;1070:25:21;;;1058:2;1043:18;5913:1158:19;;;;;;;;8190:822;;;;;;:::i;:::-;;:::i;:::-;;;1604:14:21;;1597:22;1579:41;;1567:2;1552:18;8190:822:19;1439:187:21;3591:75:19;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2127:25:21;;;2183:2;2168:18;;2161:34;;;;2211:18;;;2204:34;2269:2;2254:18;;2247:34;2114:3;2099:19;3591:75:19;1896:391:21;3462:49:19;;;;;;:::i;:::-;;;;;;;;;;;;;-1:-1:-1;;;;;3462:49:19;;;;-1:-1:-1;;;3462:49:19;;;;;-1:-1:-1;;;3462:49:19;;;;;;;;;-1:-1:-1;;;;;2500:32:21;;;2482:51;;2576:14;;2569:22;2564:2;2549:18;;2542:50;2635:14;2628:22;2608:18;;;2601:50;2470:2;2455:18;3462:49:19;2292:365:21;9935:130:19;;;:::i;10151:135::-;;;:::i;4432:818::-;;;;;;:::i;:::-;;:::i;7474:424::-;;;;;;:::i;:::-;;:::i;12156:122::-;;;;;;:::i;:::-;-1:-1:-1;;;;;12242:17:19;12219:4;12242:17;;;;;;;;;;:29;-1:-1:-1;;;12242:29:19;;;;;12156:122;12346:112;;;;;;:::i;:::-;-1:-1:-1;;;;;12427:17:19;12404:4;12427:17;;;;;;;;;;:24;-1:-1:-1;;;12427:24:19;;;;;12346:112;12537:122;;;;;;:::i;:::-;-1:-1:-1;;;;;12625:17:19;;;12599:7;12625:17;;;;;;;;;;:27;;;12537:122;;;;-1:-1:-1;;;;;3153:32:21;;;3135:51;;3123:2;3108:18;12537:122:19;2989:203:21;10409:246:19;3895:10;3886:8;:20;;;;;;;;;;:32;-1:-1:-1;;;3886:32:19;;;;:41;;;;3882:71;;3936:17;;-1:-1:-1;;;3936:17:19;;;;;;;;;;;3882:71;-1:-1:-1;;;;;10488:26:19;::::1;10484:52;;10523:13;;-1:-1:-1::0;;;10523:13:19::1;;;;;;;;;;;10484:52;10555:10;10546:8;:20:::0;;;::::1;::::0;;;;;;;:45;;-1:-1:-1;;;;;;10546:45:19::1;-1:-1:-1::0;;;;;10546:45:19;::::1;::::0;;::::1;::::0;;;10606:42;;10546:45;;10555:10;10606:42:::1;::::0;::::1;10409:246:::0;:::o;5913:1158::-;6086:22;;;;6160:13;;;;:6;:13;:::i;:::-;-1:-1:-1;;;;;6151:23:19;;;;;;;;;;;;-1:-1:-1;6151:23:19;6223:13;;6151:23;;-1:-1:-1;;;;6223:13:19;;;;6219:148;;;6291:10;6276:13;;;;:6;:13;:::i;:::-;-1:-1:-1;;;;;6257:66:19;;;;;;3399:2:21;3381:21;;;3438:2;3418:18;;;3411:30;-1:-1:-1;;;3472:2:21;3457:18;;3450:47;3529:2;3514:18;;3197:341;6257:66:19;;;;;;;;6344:1;6337:8;;;;;6219:148;6521:63;6537:16;;;;:6;:16;:::i;:::-;6567;;6555:10;;-1:-1:-1;;;;;6567:16:19;6521:15;:63::i;:::-;6516:205;;6639:10;6624:13;;;;:6;:13;:::i;:::-;-1:-1:-1;;;;;6605:72:19;;;;;;4271:2:21;4253:21;;;4310:2;4290:18;;;4283:30;4349:25;4344:2;4329:18;;4322:53;4407:2;4392:18;;4069:347;6516:205:19;7026:10;7011:13;;;;:6;:13;:::i;:::-;-1:-1:-1;;;;;6991:46:19;;;;;;;;;;;7054:1;7047:8;;;5913:1158;;;;;;:::o;8190:822::-;-1:-1:-1;;;;;8376:23:19;;;8317:17;8376:23;;;:14;:23;;;;;;;;:30;;;;;;;;;;;8421:14;;:19;:43;;;;-1:-1:-1;8444:15:19;;;;:20;8421:43;8417:102;;;8487:4;8480:11;;;;;8417:102;8581:14;;8572:23;;8568:66;;;8618:5;8611:12;;;;;8568:66;8690:18;8711:24;8729:6;8711:15;:24;:::i;:::-;8766:16;;;;8809:18;;;;8690:45;;-1:-1:-1;8766:16:19;8796:31;;8792:102;;;-1:-1:-1;8856:1:19;8792:102;8930:15;;;;8908:19;8921:6;8908:10;:19;:::i;:::-;:37;8904:80;;;8968:5;8961:12;;;;;;;8904:80;-1:-1:-1;9001:4:19;;8190:822;-1:-1:-1;;;;;;8190:822:19:o;9935:130::-;3895:10;3886:8;:20;;;;;;;;;;:32;-1:-1:-1;;;3886:32:19;;;;:41;;;;3882:71;;3936:17;;-1:-1:-1;;;3936:17:19;;;;;;;;;;;3882:71;9993:10:::1;9984:8;:20:::0;;;::::1;::::0;;;;;;;:34;;-1:-1:-1;;;;9984:34:19::1;-1:-1:-1::0;;;9984:34:19::1;::::0;;10033:25;::::1;::::0;9984:8;10033:25:::1;9935:130::o:0;10151:135::-;3895:10;3886:8;:20;;;;;;;;;;:32;-1:-1:-1;;;3886:32:19;;;;:41;;;;3882:71;;3936:17;;-1:-1:-1;;;3936:17:19;;;;;;;;;;;3882:71;10211:10:::1;10232:5;10202:20:::0;;;::::1;::::0;;;;;;;:35;;-1:-1:-1;;;;10202:35:19::1;::::0;;10252:27;::::1;::::0;10232:5;10252:27:::1;10151:135::o:0;4432:818::-;-1:-1:-1;;;;;4567:23:19;;4563:49;;4599:13;;-1:-1:-1;;;4599:13:19;;;;;;;;;;;4563:49;4635:10;4626:8;:20;;;;;;;;;;:32;-1:-1:-1;;;4626:32:19;;;;4622:62;;;4667:17;;-1:-1:-1;;;4667:17:19;;;;;;;;;;;4622:62;4718:117;;;;;;;;;-1:-1:-1;;;;;4718:117:19;;;;;-1:-1:-1;4718:117:19;;;;;;;;;;;;;;4704:10;4695:20;;;;;;;;:140;;;;;;;;;;-1:-1:-1;;;4695:140:19;-1:-1:-1;;;;4695:140:19;;;-1:-1:-1;;;4695:140:19;-1:-1:-1;;;;;;4695:140:19;;;;;;;;;;;;;;;;;;;;4930:176;;;;;;;;;;;;;;;;;;;;;;;;;5071:24;5089:6;5071:15;:24;:::i;:::-;4930:176;;4904:10;4889:26;;;;:14;:26;;;;;;;;:38;;;;;;;;:217;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5122:39;;-1:-1:-1;;;;;5122:39:19;;;;;;5176:67;;;5044:25:21;;;5100:2;5085:18;;5078:34;;;5213:1:19;;5193:10;;5176:67;;5017:18:21;5176:67:19;;;;;;;;4432:818;;;:::o;7474:424::-;3895:10;3886:8;:20;;;;;;;;;;:32;-1:-1:-1;;;3886:32:19;;;;:41;;;;3882:71;;3936:17;;-1:-1:-1;;;3936:17:19;;;;;;;;;;;3882:71;7649:170:::1;;;;;;;;7687:8;7649:170;;;;7720:9;7649:170;;;;7755:1;7649:170;;;;7802:6;7784:15;:24;;;;:::i;:::-;7649:170:::0;;7628:10:::1;7613:26;::::0;;;:14:::1;:26;::::0;;;;;;;-1:-1:-1;;;;;7613:33:19;::::1;::::0;;;;;;;;;;:206;;;;;;::::1;::::0;;;::::1;::::0;;;;;;::::1;::::0;::::1;::::0;::::1;::::0;::::1;::::0;;::::1;::::0;::::1;::::0;;::::1;::::0;;;;7835:56;;5044:25:21;;;5085:18;;;5078:34;;;7613:33:19;;7835:56:::1;::::0;5017:18:21;7835:56:19::1;4870:248:21::0;11140:750:19;11277:10;11323:2;11303:22;;11299:40;;-1:-1:-1;11334:5:19;11327:12;;11299:40;11582:2;11686:58;;5365:66:21;11517:2:19;11686:58;;;5353:79:21;;;;5448:12;;;5441:28;;;11434:30:19;;;11495:25;;;11482:39;;11560:25;;;11547:39;11350:9;11539:48;;;;5485:12:21;;11686:58:19;;;-1:-1:-1;;11686:58:19;;;;;;;;;11663:91;;11686:58;11663:91;;;;11765:17;11785:32;;;;;;;;;5735:25:21;;;5808:4;5796:17;;5776:18;;;5769:45;;;;5830:18;;;5823:34;;;5873:18;;;5866:34;;;11663:91:19;;-1:-1:-1;11765:17:19;11785:32;;5707:19:21;;11785:32:19;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;11765:52;;11847:9;-1:-1:-1;;;;;11834:22:19;:9;-1:-1:-1;;;;;11834:22:19;;:49;;;;-1:-1:-1;;;;;;11860:23:19;;;;11834:49;11827:56;;;;;;;11140:750;;;;;;;:::o;14:173:21:-;82:20;;-1:-1:-1;;;;;131:31:21;;121:42;;111:70;;177:1;174;167:12;111:70;14:173;;;:::o;192:186::-;251:6;304:2;292:9;283:7;279:23;275:32;272:52;;;320:1;317;310:12;272:52;343:29;362:9;343:29;:::i;383:536::-;500:6;508;516;569:2;557:9;548:7;544:23;540:32;537:52;;;585:1;582;575:12;537:52;625:9;612:23;658:18;650:6;647:30;644:50;;;690:1;687;680:12;644:50;713:22;;769:3;751:16;;;747:26;744:46;;;786:1;783;776:12;744:46;809:2;858;843:18;;830:32;;-1:-1:-1;909:2:21;894:18;;;881:32;;383:536;-1:-1:-1;;;383:536:21:o;1106:328::-;1183:6;1191;1199;1252:2;1240:9;1231:7;1227:23;1223:32;1220:52;;;1268:1;1265;1258:12;1220:52;1291:29;1310:9;1291:29;:::i;:::-;1281:39;;1339:38;1373:2;1362:9;1358:18;1339:38;:::i;:::-;1329:48;;1424:2;1413:9;1409:18;1396:32;1386:42;;1106:328;;;;;:::o;1631:260::-;1699:6;1707;1760:2;1748:9;1739:7;1735:23;1731:32;1728:52;;;1776:1;1773;1766:12;1728:52;1799:29;1818:9;1799:29;:::i;:::-;1789:39;;1847:38;1881:2;1870:9;1866:18;1847:38;:::i;:::-;1837:48;;1631:260;;;;;:::o;2662:322::-;2739:6;2747;2755;2808:2;2796:9;2787:7;2783:23;2779:32;2776:52;;;2824:1;2821;2814:12;2776:52;2847:29;2866:9;2847:29;:::i;3543:521::-;3620:4;3626:6;3686:11;3673:25;3780:2;3776:7;3765:8;3749:14;3745:29;3741:43;3721:18;3717:68;3707:96;;3799:1;3796;3789:12;3707:96;3826:33;;3878:20;;;-1:-1:-1;3921:18:21;3910:30;;3907:50;;;3953:1;3950;3943:12;3907:50;3986:4;3974:17;;-1:-1:-1;4017:14:21;4013:27;;;4003:38;;4000:58;;;4054:1;4051;4044:12;4000:58;3543:521;;;;;:::o;4421:217::-;4461:1;4487;4477:132;;4531:10;4526:3;4522:20;4519:1;4512:31;4566:4;4563:1;4556:15;4594:4;4591:1;4584:15;4477:132;-1:-1:-1;4623:9:21;;4421:217::o;4643:222::-;4708:9;;;4729:10;;;4726:133;;;4781:10;4776:3;4772:20;4769:1;4762:31;4816:4;4813:1;4806:15;4844:4;4841:1;4834:15;4726:133;4643:222;;;;:::o","linkReferences":{}},"methodIdentifiers":{"accounts(address)":"5e5c06e2","checkSpendingLimit(address,address,uint256)":"40097416","freeze()":"62a5af3b","getEvaluator(address)":"f02926c7","initialize(address,uint256,uint256)":"7a1ac61e","isFrozen(address)":"e5839836","isInitialized(address)":"d60b347f","setEvaluator(address)":"02dbbbac","setSpendingLimit(address,uint256,uint256)":"c51e8e44","spendingLimits(address,address)":"40cc860b","unfreeze()":"6a28f000","validateUserOp((address,uint256,bytes,bytes,bytes32,uint256,bytes32,bytes,bytes),bytes32,uint256)":"19822f7c"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"AccountIsFrozen\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidApprovalSignature\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidEvaluator\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotAccountOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"limitType\",\"type\":\"string\"}],\"name\":\"SpendingLimitExceeded\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"AccountFrozen\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"AccountUnfrozen\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"evaluator\",\"type\":\"address\"}],\"name\":\"EvaluatorUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maxPerTx\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maxPerDay\",\"type\":\"uint256\"}],\"name\":\"SpendingLimitSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"userOpHash\",\"type\":\"bytes32\"}],\"name\":\"TransactionApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"userOpHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"TransactionBlocked\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"accounts\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"evaluator\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"frozen\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"initialized\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"checkSpendingLimit\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"withinLimits\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"freeze\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"getEvaluator\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"evaluator\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"ethMaxPerTx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ethMaxPerDay\",\"type\":\"uint256\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"isFrozen\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"isInitialized\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newEvaluator\",\"type\":\"address\"}],\"name\":\"setEvaluator\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"maxPerTx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxPerDay\",\"type\":\"uint256\"}],\"name\":\"setSpendingLimit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"spendingLimits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"maxPerTx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxPerDay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"spentToday\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastResetDay\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unfreeze\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"initCode\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"callData\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"accountGasLimits\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"preVerificationGas\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"gasFees\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"paymasterAndData\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"}],\"internalType\":\"struct PackedUserOperation\",\"name\":\"userOp\",\"type\":\"tuple\"},{\"internalType\":\"bytes32\",\"name\":\"userOpHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"validateUserOp\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"validationData\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"checkSpendingLimit(address,address,uint256)\":{\"params\":{\"account\":\"The smart account\",\"amount\":\"Transaction amount\",\"token\":\"Token address (address(0) for ETH)\"},\"returns\":{\"withinLimits\":\"Whether the amount is within limits\"}},\"freeze()\":{\"details\":\"Can only be called by the account itself (via a previous UserOp).\"},\"initialize(address,uint256,uint256)\":{\"params\":{\"ethMaxPerDay\":\"Maximum ETH per day (wei)\",\"ethMaxPerTx\":\"Maximum ETH per transaction (wei)\",\"evaluator\":\"Address of the Wardex evaluator (signs approval tokens)\"}},\"setEvaluator(address)\":{\"params\":{\"newEvaluator\":\"New evaluator address\"}},\"setSpendingLimit(address,uint256,uint256)\":{\"params\":{\"maxPerDay\":\"Maximum per day\",\"maxPerTx\":\"Maximum per transaction\",\"token\":\"Token address (address(0) for ETH)\"}},\"validateUserOp((address,uint256,bytes,bytes,bytes32,uint256,bytes32,bytes,bytes),bytes32,uint256)\":{\"details\":\"Checks:      1. Account is not frozen      2. UserOp signature contains a valid Wardex approval      3. Transaction value is within spending limits\",\"params\":{\"userOp\":\"The UserOperation to validate\",\"userOpHash\":\"Hash of the UserOperation (for signature verification)\"},\"returns\":{\"validationData\":\"0 if valid, 1 if invalid (per ERC-4337 spec)\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"accounts(address)\":{\"notice\":\"Configuration per smart account\"},\"checkSpendingLimit(address,address,uint256)\":{\"notice\":\"Check if a transaction value is within spending limits.\"},\"freeze()\":{\"notice\":\"Freeze the account - blocks ALL transactions.\"},\"getEvaluator(address)\":{\"notice\":\"Get the evaluator address for an account.\"},\"initialize(address,uint256,uint256)\":{\"notice\":\"Initialize Wardex protection for a smart account.\"},\"isFrozen(address)\":{\"notice\":\"Check if an account is frozen.\"},\"isInitialized(address)\":{\"notice\":\"Check if an account is initialized with Wardex.\"},\"setEvaluator(address)\":{\"notice\":\"Update the Wardex evaluator address.\"},\"setSpendingLimit(address,uint256,uint256)\":{\"notice\":\"Set spending limits for a specific token.\"},\"spendingLimits(address,address)\":{\"notice\":\"Spending limits per account per token (address(0) = ETH)\"},\"unfreeze()\":{\"notice\":\"Unfreeze the account - resumes normal operation.\"},\"validateUserOp((address,uint256,bytes,bytes,bytes32,uint256,bytes32,bytes,bytes),bytes32,uint256)\":{\"notice\":\"Validates a UserOperation for the EntryPoint.\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/WardexValidationModule.sol\":\"WardexValidationModule\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/WardexValidationModule.sol\":{\"keccak256\":\"0x31950e28c3e0ef9650bed9a95c030ed1a9137615c02a2b63df54ca0d8db8b071\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://99fc8343c10323c23dedcd5f1011d9bc93c4a41897628ef95f78d6ca1cc51870\",\"dweb:/ipfs/QmVNnCn5Rnz1wqRh41F8jTcMkLxoa4KbcYWgm85iWWa1tD\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"AccountIsFrozen"},{"inputs":[],"type":"error","name":"InvalidApprovalSignature"},{"inputs":[],"type":"error","name":"InvalidEvaluator"},{"inputs":[],"type":"error","name":"NotAccountOwner"},{"inputs":[{"internalType":"string","name":"limitType","type":"string"}],"type":"error","name":"SpendingLimitExceeded"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true}],"type":"event","name":"AccountFrozen","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true}],"type":"event","name":"AccountUnfrozen","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"address","name":"evaluator","type":"address","indexed":true}],"type":"event","name":"EvaluatorUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"maxPerTx","type":"uint256","indexed":false},{"internalType":"uint256","name":"maxPerDay","type":"uint256","indexed":false}],"type":"event","name":"SpendingLimitSet","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"bytes32","name":"userOpHash","type":"bytes32","indexed":true}],"type":"event","name":"TransactionApproved","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"bytes32","name":"userOpHash","type":"bytes32","indexed":true},{"internalType":"string","name":"reason","type":"string","indexed":false}],"type":"event","name":"TransactionBlocked","anonymous":false},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"accounts","outputs":[{"internalType":"address","name":"evaluator","type":"address"},{"internalType":"bool","name":"frozen","type":"bool"},{"internalType":"bool","name":"initialized","type":"bool"}]},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"view","type":"function","name":"checkSpendingLimit","outputs":[{"internalType":"bool","name":"withinLimits","type":"bool"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"freeze"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"stateMutability":"view","type":"function","name":"getEvaluator","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"evaluator","type":"address"},{"internalType":"uint256","name":"ethMaxPerTx","type":"uint256"},{"internalType":"uint256","name":"ethMaxPerDay","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"stateMutability":"view","type":"function","name":"isFrozen","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"stateMutability":"view","type":"function","name":"isInitialized","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"newEvaluator","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setEvaluator"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"maxPerTx","type":"uint256"},{"internalType":"uint256","name":"maxPerDay","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setSpendingLimit"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"spendingLimits","outputs":[{"internalType":"uint256","name":"maxPerTx","type":"uint256"},{"internalType":"uint256","name":"maxPerDay","type":"uint256"},{"internalType":"uint256","name":"spentToday","type":"uint256"},{"internalType":"uint256","name":"lastResetDay","type":"uint256"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"unfreeze"},{"inputs":[{"internalType":"struct PackedUserOperation","name":"userOp","type":"tuple","components":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"bytes","name":"initCode","type":"bytes"},{"internalType":"bytes","name":"callData","type":"bytes"},{"internalType":"bytes32","name":"accountGasLimits","type":"bytes32"},{"internalType":"uint256","name":"preVerificationGas","type":"uint256"},{"internalType":"bytes32","name":"gasFees","type":"bytes32"},{"internalType":"bytes","name":"paymasterAndData","type":"bytes"},{"internalType":"bytes","name":"signature","type":"bytes"}]},{"internalType":"bytes32","name":"userOpHash","type":"bytes32"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"validateUserOp","outputs":[{"internalType":"uint256","name":"validationData","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"checkSpendingLimit(address,address,uint256)":{"params":{"account":"The smart account","amount":"Transaction amount","token":"Token address (address(0) for ETH)"},"returns":{"withinLimits":"Whether the amount is within limits"}},"freeze()":{"details":"Can only be called by the account itself (via a previous UserOp)."},"initialize(address,uint256,uint256)":{"params":{"ethMaxPerDay":"Maximum ETH per day (wei)","ethMaxPerTx":"Maximum ETH per transaction (wei)","evaluator":"Address of the Wardex evaluator (signs approval tokens)"}},"setEvaluator(address)":{"params":{"newEvaluator":"New evaluator address"}},"setSpendingLimit(address,uint256,uint256)":{"params":{"maxPerDay":"Maximum per day","maxPerTx":"Maximum per transaction","token":"Token address (address(0) for ETH)"}},"validateUserOp((address,uint256,bytes,bytes,bytes32,uint256,bytes32,bytes,bytes),bytes32,uint256)":{"details":"Checks:      1. Account is not frozen      2. UserOp signature contains a valid Wardex approval      3. Transaction value is within spending limits","params":{"userOp":"The UserOperation to validate","userOpHash":"Hash of the UserOperation (for signature verification)"},"returns":{"validationData":"0 if valid, 1 if invalid (per ERC-4337 spec)"}}},"version":1},"userdoc":{"kind":"user","methods":{"accounts(address)":{"notice":"Configuration per smart account"},"checkSpendingLimit(address,address,uint256)":{"notice":"Check if a transaction value is within spending limits."},"freeze()":{"notice":"Freeze the account - blocks ALL transactions."},"getEvaluator(address)":{"notice":"Get the evaluator address for an account."},"initialize(address,uint256,uint256)":{"notice":"Initialize Wardex protection for a smart account."},"isFrozen(address)":{"notice":"Check if an account is frozen."},"isInitialized(address)":{"notice":"Check if an account is initialized with Wardex."},"setEvaluator(address)":{"notice":"Update the Wardex evaluator address."},"setSpendingLimit(address,uint256,uint256)":{"notice":"Set spending limits for a specific token."},"spendingLimits(address,address)":{"notice":"Spending limits per account per token (address(0) = ETH)"},"unfreeze()":{"notice":"Unfreeze the account - resumes normal operation."},"validateUserOp((address,uint256,bytes,bytes,bytes32,uint256,bytes32,bytes,bytes),bytes32,uint256)":{"notice":"Validates a UserOperation for the EntryPoint."}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/WardexValidationModule.sol":"WardexValidationModule"},"evmVersion":"cancun","libraries":{}},"sources":{"src/WardexValidationModule.sol":{"keccak256":"0x31950e28c3e0ef9650bed9a95c030ed1a9137615c02a2b63df54ca0d8db8b071","urls":["bzz-raw://99fc8343c10323c23dedcd5f1011d9bc93c4a41897628ef95f78d6ca1cc51870","dweb:/ipfs/QmVNnCn5Rnz1wqRh41F8jTcMkLxoa4KbcYWgm85iWWa1tD"],"license":"MIT"}},"version":1},"id":19}